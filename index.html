<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Prosail by jgomezdans</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Prosail</h1>
      <h2 class="project-tagline">Python bindings for the PROSAIL canopy reflectance model</h2>
      <a href="https://github.com/jgomezdans/prosail" class="btn">View on GitHub</a>
      <a href="https://github.com/jgomezdans/prosail/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/jgomezdans/prosail/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p><img src="http://www.nceo.ac.uk/images/NCEO_logo_lrg.jpg" alt="NCEO logo" align="right">
<img src="http://www.esa.int/esalogo/images/logotype/img_colorlogo_darkblue.gif" alt="ESA logo" align="left"></p>

<p><br>
<br>
<br></p>

<hr>

<h1>
<a id="prosail-python-bindings" class="anchor" href="#prosail-python-bindings" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>PROSAIL Python Bindings</h1>

<h4>
<a id="j-gomez-dans-nceo--ucl-jgomez-dansuclacuk" class="anchor" href="#j-gomez-dans-nceo--ucl-jgomez-dansuclacuk" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>J Gomez-Dans (NCEO &amp; UCL) <code>j.gomez-dans@ucl.ac.uk</code>
</h4>

<h2>
<a id="description" class="anchor" href="#description" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Description</h2>

<p>This repository contains the Python bindings to the PROSPECT and SAIL leaf and 
canopy reflectance models. The code is written in FORTRAN. The original fortran
code was downloaded from <a href="http://teledetection.ipgp.jussieu.fr/prosail/">Jussieu</a>. 
I only added a function to simplify writing the wrappers, and you should go to
that page to get newer versions of the code. A recent review of the use of both
models is availabe in <a href="http://webdocs.dow.wur.nl/internet/grs/Workshops/Environmental_Applications_Imaging_Spectroscopy/12_Jacquemoud_Prospect/IEEE_Jacquemoud_PROSPECT.pdf">this paper</a>_.</p>

<h2>
<a id="installing-the-bindings" class="anchor" href="#installing-the-bindings" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installing the bindings</h2>

<p>The installation of the bindings is quite straightforward: unpack the distribution
and run the following command   </p>

<pre><code>python setup.py install
</code></pre>

<p>You can usually install it to your user's directory (if you haven't got superuser
privileges) by </p>

<pre><code>python setup.py install --user
</code></pre>

<h4>
<a id="note" class="anchor" href="#note" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Note</strong>
</h4>

<p>You will need a working FORTRAN compiler. I have only tested this with GCC on Linux, but it should work on other systems. You can also pass optimisation flags to the compiler: </p>

<pre><code>python setup.py config_fc  --fcompiler=gnu95   --arch=-march=native --opt=-O3  install --user
</code></pre>

<h2>
<a id="using-the-bindings" class="anchor" href="#using-the-bindings" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using the bindings</h2>

<p>The bindings offer several functions, which will be described in detail below:.</p>

<ul>
<li>
<code>run_prospect</code>: This function runs the PROSPECT 5B model in Feret et al 2008. The input parameters are the usual <code>(n,cab,car,cbrown,cw,cm)</code> (e.g. leaf layers, leaf Chlorophyll concentration, leaf Carotenoid concentration, leaf senescent fraction, Equivalent leaf water, leaf dry matter). It returns a spectrum between 400 and 2500 nm.</li>
<li>
<code>run_sail</code>:  The SAILh model, which in this case requires leaf reflectance and transmittance to be fed to the model (e.g. you have already measured these spectra in the field). The rest of the parameters are <code>(refl,trans,lai,lidfa,lidfb,rsoil,psoil,hspot,tts,tto,psi,typelidf)</code>. Additionally, there are two optional parameters, <code>soil_spectrum1</code>, <code>soil_spectrum2</code>, which allow you to set the soil spectra (otherwise, some default spectra get used). Output is a spectrum in the 400-2500 nm range.</li>
<li>
<code>run_prosail</code>: PROSPECT_5B and SAILh coupled together, with input parameters given by <code>(n,cab,car,cbrown,cw,cm,lai,lidfa,lidfb,rsoil,psoil,hspot,tts,tto,psi,typelidf)</code>. Output is a spectrum in the 400-2500 nm range.</li>
</ul>

<h2>
<a id="the-parameters" class="anchor" href="#the-parameters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The parameters</h2>

<p>The parameters used by the models and their units are introduced below:</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description of parameter</th>
<th>Units</th>
<th>Typical min</th>
<th>Typical max</th>
</tr>
</thead>
<tbody>
<tr>
<td>N</td>
<td>Leaf structure parameter</td>
<td>N/A</td>
<td>0.8</td>
<td>2.5</td>
</tr>
<tr>
<td>cab</td>
<td>Chlorophyll a+b concentration</td>
<td>ug/cm2</td>
<td>0</td>
<td>80</td>
</tr>
<tr>
<td>caw</td>
<td>Equivalent water thickiness</td>
<td>cm</td>
<td>0</td>
<td>200</td>
</tr>
<tr>
<td>car</td>
<td>Carotenoid concentration</td>
<td>ug/cm2</td>
<td>0</td>
<td>20</td>
</tr>
<tr>
<td>cbrown</td>
<td>Brown pigment</td>
<td>NA</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>cm</td>
<td>Dry matter content</td>
<td>g/cm2</td>
<td>0</td>
<td>200</td>
</tr>
<tr>
<td>lai</td>
<td>Leaf Area Index</td>
<td>N/A</td>
<td>0</td>
<td>10</td>
</tr>
<tr>
<td>lidfa</td>
<td>Leaf angle distribution</td>
<td>N/A</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>lidfb</td>
<td>Leaf angle distribution</td>
<td>N/A</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>psoil</td>
<td>Dry/Wet soil factor</td>
<td>N/A</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>rsoil</td>
<td>Soil brigthness factor</td>
<td>N/A</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>hspot</td>
<td>Hotspot parameter</td>
<td>N/A</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>tts</td>
<td>Solar zenith angle</td>
<td>deg</td>
<td>0</td>
<td>90</td>
</tr>
<tr>
<td>tto</td>
<td>Observer zenith angle</td>
<td>deg</td>
<td>0</td>
<td>90</td>
</tr>
<tr>
<td>phi</td>
<td>Relative azimuth angle</td>
<td>deg</td>
<td>0</td>
<td>360</td>
</tr>
<tr>
<td>typelidf</td>
<td>Leaf angle distribution type</td>
<td>Integer</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>

<h3>
<a id="specifying-the-leaf-angle-distribution" class="anchor" href="#specifying-the-leaf-angle-distribution" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Specifying the leaf angle distribution</h3>

<p>The parameter <code>typelidf</code> regulates the leaf angle distribution family being used. The following options are understood:</p>

<ul>
<li>
<code>typelidf = 1</code>: use the two parameter LAD parameterisation, where <code>a</code> and <code>b</code> control the average leaf slope and the distribution bimodality, respectively. Typical distributions
are given by the following parameter  choices:</li>
</ul>

<table>
<thead>
<tr>
<th>LIDF type</th>
<th><code>LIDFa</code></th>
<th><code>LIDFb</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>Planophile</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Erectophile</td>
<td>-1</td>
<td>0</td>
</tr>
<tr>
<td>Plagiophile</td>
<td>0</td>
<td>-1</td>
</tr>
<tr>
<td>Extremophile</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>Spherical</td>
<td>-0.35</td>
<td>-0.15</td>
</tr>
<tr>
<td>Uniform</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>

<ul>
<li>
<code>typelidf = 2</code> Ellipsoidal distribution, where <code>LIDFa</code> parameter stands for mean leaf angle (0 degrees is planophile, 90 degrees is erectophile). <code>LIDFb</code> parameter is ignored.</li>
</ul>

<h3>
<a id="the-soil-model" class="anchor" href="#the-soil-model" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The soil model</h3>

<p>The soil model is a fairly simple linear mixture model, where two spectra are mixed and then a brightness term added:</p>

<pre><code>rho_soil = rsoil*(psoil*soil_spectrum1+(1-psoil)*soil_spectrum2)
</code></pre>

<p>The idea is that one of the spectra is a dry soil and the other a wet soil, so soil moisture is then contorlled by <code>psoil</code>. <code>rsoil</code> is just a brightness scaling term.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/jgomezdans/prosail">Prosail</a> is maintained by <a href="https://github.com/jgomezdans">jgomezdans</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-25702318-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
